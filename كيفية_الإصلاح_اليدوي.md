# كيفية الإصلاح اليدوي للنصوص العربية المشوهة

## المشكلة
النصوص العربية في ملف `app.py` تظهر مشوهة مثل: `"?   !"` بدلاً من `"تم إضافة السؤال بنجاح!"`

## السبب
مشكلة في ترميز الملف (Encoding). الملف يحتاج إلى ترميز UTF-8.

---

## الطريقة الأولى: استخدام Cursor/VS Code (الأسهل)

### الخطوات:

1. **افتح ملف `app.py` في Cursor**
   - انقر نقراً مزدوجاً على الملف أو اضغط `Ctrl + O`

2. **تحقق من الترميز:**
   - انظر إلى شريط الحالة في أسفل النافذة
   - يجب أن ترى الترميز الحالي (مثل: `UTF-8` أو `Windows-1256` أو `ANSI`)
   - إذا لم يكن `UTF-8`، انقر عليه واختر `Save with Encoding` → `UTF-8`

3. **ابحث عن النصوص المشوهة:**
   - اضغط `Ctrl + F` للبحث
   - ابحث عن: `flash\(` أو `\?` للعثور على الرسائل المشوهة

4. **استبدل النصوص المشوهة:**
   - استخدم `Ctrl + H` للبحث والاستبدال
   - أو استبدل يدوياً كل نص مشوه

5. **احفظ الملف:**
   - اضغط `Ctrl + S`
   - تأكد من أن الترميز هو `UTF-8` عند الحفظ

---

## الطريقة الثانية: استخدام Notepad++

### الخطوات:

1. **افتح Notepad++**
   - إذا لم يكن مثبتاً، حمّله من: https://notepad-plus-plus.org/

2. **افتح ملف `app.py`:**
   - File → Open → اختر `app.py`

3. **غيّر الترميز إلى UTF-8:**
   - Encoding → Convert to UTF-8
   - أو Encoding → UTF-8-BOM (إذا لزم الأمر)

4. **ابحث واستبدل النصوص المشوهة:**
   - اضغط `Ctrl + F`
   - اذهب إلى تبويب "Replace"
   - ابحث عن: `flash\(.*\?`
   - استبدل كل نص مشوه بالنص الصحيح

5. **احفظ الملف:**
   - File → Save (Ctrl + S)
   - تأكد من أن الترميز في شريط الحالة هو `UTF-8`

---

## قائمة النصوص المشوهة والصحيحة

### رسائل تسجيل الدخول:
- `"? ??? ???????? ?? ???? ???? ????"` → `"لا يمكنك تسجيل الدخول كمدير من هنا"`
- `"? ??? ???????? ?? ???? ?????? ??? ?????"` → `"اسم المستخدم أو كلمة المرور غير صحيحة"`
- `"?     "` → `"ليس لديك صلاحية الدخول كمدير"`
- `"?    "` → `"اسم المستخدم أو كلمة المرور غير صحيحة"`
- `"?      "` → `"ليس لديك صلاحية الدخول كمدير نظام"`
- `"?     "` → `"اسم المستخدم أو كلمة المرور غير صحيحة"`

### رسائل إدارة المستخدمين:
- `"? ???? ?????? ?????? ??????"` → `"الاسم واسم المستخدم وكلمة المرور والنوع مطلوبون"`
- `"? ??? ???????? ????? ??????"` → `"اسم المستخدم موجود بالفعل"`
- `"? ?? ????? {user_type_name} ???? ?????"` → `"تم إضافة {user_type_name} بنجاح"`
- `"? ?? ??? ???????? ?????"` → `"تم حذف المستخدم بنجاح"`
- `"? ??? ???????? ?????"` → `"النوع مطلوب"`
- `"? ?? ????? ??? ???????? ?????"` → `"تم تحديث نوع المستخدم بنجاح"`

### رسائل إدارة الطلاب:
- `"? ???? ?????? ?????? ??????"` → `"اسم المستخدم وكلمة المرور مطلوبان"`
- `"? ??? ???????? ????? ??????"` → `"اسم المستخدم موجود بالفعل"`
- `"? ?? ????? ?????? {username} ?????"` → `"تم إضافة طالب {username} بنجاح"`
- `"? ?? ??? ?????? ?????"` → `"تم حذف الطالب بنجاح"`
- `"? ?? ???? ?????? ?????"` → `"تم الموافقة على الطالب بنجاح"`

### رسائل حذف البيانات:
- `"? ?? ??? ???? ??????? ??????????? ?????"` → `"تم حذف جميع البيانات بنجاح"`
- `"? ??? ??? ??? ??? ????????"` → `"حدث خطأ أثناء حذف البيانات"`
- `"? ?? ??? ???? ??????? ??????? ?????"` → `"تم حذف جميع النتائج بنجاح"`

### رسائل إضافة الأسئلة:
- `"? ?? ??? ?????? ?????!"` → `"تم إضافة السؤال بنجاح!"`
- `"?     : {str(e3)}"` → `"حدث خطأ أثناء إضافة السؤال: {str(e3)}"`

### رسائل أخرى:
- `"? ??? ????? ?????? ?????"` → `"يجب تسجيل الدخول أولاً"`
- `"'?? ?? ???? ????? ???????'"` → `"'لا يوجد نتائج للتصدير'"`

---

## طريقة سريعة: استخدام البحث والاستبدال

في Cursor أو VS Code:

1. اضغط `Ctrl + H`
2. فعّل خيار "Use Regular Expression" (Regex)
3. في حقل "Find"، أدخل: `flash\(".*\?.*"\)
4. في حقل "Replace"، استخدم النص الصحيح لكل حالة

**ملاحظة:** قد تحتاج إلى استبدال كل حالة يدوياً لأن النصوص مختلفة.

---

## نصائح مهمة:

1. **احفظ نسخة احتياطية** قبل البدء:
   - انسخ `app.py` إلى `app.py.backup`

2. **راجع الترميز بعد كل تعديل:**
   - تأكد من أن الملف محفوظ بترميز UTF-8

3. **اختبر التطبيق بعد التعديل:**
   - شغّل التطبيق وتحقق من ظهور الرسائل بشكل صحيح

4. **استخدم Git (إذا كان مستخدماً):**
   - احفظ التغييرات بانتظام: `git add app.py` ثم `git commit`

---

## التحقق من الإصلاح:

بعد الإصلاح، ابحث في الملف عن:
- `\?` (رمز الاستفهام مع مسافة)
- `` (رموز غير معروفة)

إذا لم تجد أي نتائج، فالإصلاح ناجح!

---

## في حالة استمرار المشكلة:

إذا استمرت المشكلة بعد الإصلاح اليدوي:

1. تحقق من إعدادات المحرر (Editor Settings):
   - تأكد من أن الترميز الافتراضي هو `UTF-8`

2. تحقق من إعدادات Python:
   - في بداية `app.py`، تأكد من وجود: `# -*- coding: utf-8 -*-`

3. تحقق من إعدادات Flask:
   - تأكد من أن Flask يستخدم UTF-8 في الترميز

---

## مثال عملي:

**قبل الإصلاح:**
```python
flash("? ?? ??? ?????? ?????!")
```

**بعد الإصلاح:**
```python
flash("تم إضافة السؤال بنجاح!")
```

---

**تاريخ الإنشاء:** $(Get-Date -Format "yyyy-MM-dd")
**عدد الرسائل المشوهة المتبقية:** 29
